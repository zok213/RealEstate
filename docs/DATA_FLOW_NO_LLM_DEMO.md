# üîÑ DATA FLOW PIPELINE (NO LLM DEMO)
## Industrial Estate Planning - Rule-Based Demo (No AI/LLM)

**Date:** January 28, 2026  
**Version:** 1.0  
**Purpose:** Show end-to-end data flow for a rule-based, non-AI demo: user uploads file, system applies regulations, outputs compliant layout

---

## üìä OVERVIEW

**Goal:**
- Demonstrate system can process DXF input, apply all IEAT regulations, and generate a compliant site layout using only deterministic, rule-based logic (no AI/LLM involved).

---

## üõ†Ô∏è STEP-BY-STEP DATA FLOW

### 1. **File Upload & Validation**
- User uploads DXF file (site boundary, contours, optional existing features)
- System checks file size, format, and safety
- Valid file is stored and ready for processing

### 2. **DXF Parsing & Boundary Extraction**
- System reads DXF, extracts main site boundary (largest closed polyline)
- Extracts contour lines for terrain (if present)
- Calculates total site area, perimeter, and basic shape metrics

### 3. **Terrain & Buildability Analysis**
- Converts contour lines to elevation grid
- Calculates slope for each grid cell
- Classifies areas as flat, gentle, moderate, or steep
- Flags unbuildable areas (>15% slope)

### 4. **User Requirements Input (Form)**
- User fills out form:
  - Target lot size or number of lots
  - Industry type (dropdown)
  - Green space % (must be ‚â•10%)
  - Road width (main ‚â•25m, secondary ‚â•15m)
  - Buffer zone (default 10m)
- System validates all inputs against regulations (hard min/max)

### 5. **Regulation-Driven Layout Generation**
- System applies all IEAT and Thai code rules as hard constraints:
  - 10m buffer zone applied to boundary (shrinks usable area)
  - Green space area reserved (‚â•10% of site, distributed perimeter/central)
  - Road network generated using grid or T-pattern (deterministic, not optimized)
  - Roads placed to ensure all lots have access, using minimum widths
  - Lots subdivided into rectangles within remaining area, sized to user input
  - Utilities (transformer, water, WWTP) placed at standard intervals/locations
- No AI/LLM: All geometry is generated by fixed algorithms (e.g., grid, offset, regular spacing)

### 6. **Compliance Validation**
- System checks:
  - Green space ‚â•10% of total area
  - Buffer zone present on all sides
  - All roads meet width requirements
  - All lots within allowed size range
  - All lots have road and utility access
- Any violation blocks output and returns error to user

### 7. **Output Generation**
- System generates:
  - DXF file with layers: BOUNDARY, LOTS, ROADS, GREEN_SPACE, UTILITIES, LABELS
  - PDF report with summary tables, compliance checklist, and site plan image
  - Web preview (GeoJSON) for interactive viewing
- All outputs are fully regulation-compliant, but may not be as efficient or aesthetic as AI-generated layouts

---

## üìù KEY DIFFERENCES FROM AI/LLM FLOW
- **No optimization or learning:** All layout logic is deterministic and based on fixed rules
- **No natural language input:** User must fill out structured form fields
- **No scenario-based design:** Only standard grid or block layouts supported
- **No iterative refinement:** Output is single-pass, not improved by feedback
- **Purpose:** Demonstrate regulatory compliance and technical feasibility, not design quality or flexibility

---

## üì¶ DATA PERSISTENCE
- Same as main system: Projects, site geometries, design versions, lots stored in PostgreSQL/PostGIS
- All geometry generated by rule-based algorithms, not AI

---

**Prepared by:** Technical Team  
**Date:** January 28, 2026
